{% extends "layout.html" %}

{% block content %}
<h2>Mantenimientos</h2>

<h3>Registrar Mantenimiento</h3>
<form action="/mantenimientos/add" method="POST">
    <label>Equipo</label>
    <select name="equipo_id" required>
        {% for e in equipos %}
        <option value="{{ e.id }}">{{ e.tipo }} - {{ e.modelo }}</option>
        {% endfor %}
    </select>

    <label>Fecha</label>
    <input type="date" name="fecha" required>

    <label>Detalle</label>
    <textarea name="detalle" required></textarea>

    <button type="submit">Guardar</button>
</form>

<h3>Listado</h3>
<table>
    <tr>
        <th>ID</th>
        <th>Fecha</th>
        <th>Detalle</th>
        <th>Equipo</th>
        <th>Acciones</th>
    </tr>

    {% for m in mantenimientos %}
    <tr>
        <td>{{ m.id }}</td>
        <td>{{ m.fecha }}</td>
        <td>{{ m.detalle }}</td>
        <td>{{ m.equipo_tipo }} - {{ m.equipo_modelo }}</td>
        <td><a href="/mantenimientos/editar/{{ m.id }}">Editar</a></td>
    </tr>
    {% endfor %}
</table>

{% endblock %}
