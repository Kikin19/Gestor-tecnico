{% extends "base.html" %}

{% block title %}{% if mantenimiento %}Editar Mantenimiento{% else %}Agregar Mantenimiento{% endif %}{% endblock %}

{% block content %}
<h1>{% if mantenimiento %}Editar Mantenimiento{% else %}Agregar Mantenimiento{% endif %}</h1>

<form method="POST"
    {% if mantenimiento %} action="{{ url_for('editar_mantenimiento', id=mantenimiento.id) }}" 
    {% else %} action="{{ url_for('agregar_mantenimiento') }}" {% endif %}>

    <label>Equipo:</label>
    <select name="equipo_id" required>
        <option value="">-- Seleccione un equipo --</option>
        {% for e in equipos %}
            <option value="{{ e.id }}" {% if mantenimiento and mantenimiento.equipo_id == e.id %}selected{% endif %}>
                {{ e.tipo }} - {{ e.modelo }}
            </option>
        {% endfor %}
    </select>

    <label>Tipo:</label>
    <input type="text" name="tipo" value="{% if mantenimiento %}{{ mantenimiento.tipo }}{% endif %}" required>

    <label>Descripci√≥n:</label>
    <input type="text" name="descripcion" value="{% if mantenimiento %}{{ mantenimiento.descripcion }}{% endif %}">

    <label>Piezas:</label>
    <input type="text" name="piezas" value="{% if mantenimiento %}{{ mantenimiento.piezas }}{% endif %}">

    <label>Fecha Ingreso:</label>
    <input type="date" name="fecha_ingreso" value="{% if mantenimiento %}{{ mantenimiento.fecha_ingreso }}{% endif %}">

    <label>Fecha Entrega:</label>
    <input type="date" name="fecha_entrega" value="{% if mantenimiento %}{{ mantenimiento.fecha_entrega }}{% endif %}">

    <label>Costo:</label>
    <input type="number" step="0.01" name="costo" value="{% if mantenimiento %}{{ mantenimiento.costo }}{% endif %}">

    <label>Estado:</label>
    <input type="text" name="estado" value="{% if mantenimiento %}{{ mantenimiento.estado }}{% endif %}">

    <button type="submit">
        {% if mantenimiento %}Guardar{% else %}Agregar{% endif %}
    </button>
</form>
{% endblock %}
